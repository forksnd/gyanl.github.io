<footer class="site-footer h-card">
  <data class="u-url" href="{{ "/" | relative_url }}"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">

      <div class="footer-col one-half">
        <h2 class="footer-heading">{{ site.title | escape }}</h2>
        <ul class="contact-list">
          <p>{{- site.description | escape -}}</p>
          <!-- <li class="p-name">
            {%- if site.author -%}
              {{ site.author | escape }}
            {%- endif -%}
            </li>
            {%- if site.email -%}
            <li><a class="u-email" href="mailto:{{ site.email }}">{{ site.email }}</a></li>
            {%- endif -%} -->
        </ul>
      </div>

      <div class="footer-col one-half">
        <h2 class="footer-heading"></h2>
        <a href="archive">Notes Archive</a> | <a href="now">Now Page</a>
        <div class="social-links">
          {%- include social.html -%}
        </div>

        <!-- <p>{{- site.description | escape -}}</p> -->
      </div>

    </div>

  </div>
  <script>
      // get all <p> tags with class="slideshow"
      var slideshow = document.getElementsByClassName("slideshow");
      var numslideshows = slideshow.length;
      console.log(numslideshows + " slideshows found");

      var indexPrev = 0;
      var indexCurrent = 1;
      var indexNext = 2;

      function setDots() {
        var dots = document.getElementsByClassName("dot");
        // remove active class from all dots
        for (var i = 0; i < dots.length; i++) {
          dots[i].classList.remove("active");
        }
        // add active class to current dot
        dots[indexCurrent].classList.add("active");
      }

      function setslides() {
        // prev.src = imgname + indexPrev + ext;
        // current.src = imgname + indexCurrent + ext;
        // next.src = imgname + indexNext + ext;

        setDots();
      } 

      function slidePrev() {
        slideshow[0].innerHTML = "<img id='slideshow-" + indexPrev + "' onclick='slideHandler(this.id)' src='" + imgname + indexPrev + ext + "'>" + slideshow[0].innerHTML;
        setDots();
      }


      function slideNext() {
        slideshow[0].innerHTML = slideshow[0].innerHTML + "<img id='slideshow-" + indexNext + "' onclick='slideHandler(this.id)' src='" + imgname + indexNext + ext + "' >";
        setDots();
      }

      function slideHandler(id) {
        var index = id.substring(10, id.length);

        console.log("index = " + index);

        if (index == indexPrev) {

          document.getElementById("slideshow-" + indexNext).remove();

          if (indexPrev == 0) {
          indexPrev = numslides - 1;
        } else {
          indexPrev = indexPrev - 1;
        }
        if (indexCurrent == 0) {
          indexCurrent = numslides - 1;
        } else {
          indexCurrent = indexCurrent - 1;
        }
        if (indexNext == 0) {
          indexNext = numslides - 1;
        } else {
          indexNext = indexNext - 1;
        }
          slidePrev();
        }
        if (index == indexNext) {

          document.getElementById("slideshow-" + indexPrev).remove();

          indexPrev = (indexPrev + 1)%numslides;
          indexCurrent = (indexCurrent + 1)%numslides;
          indexNext = (indexNext + 1)%numslides;
          slideNext();
        }
      }

      // console.log every slideshow
      for (var i = 0; i < numslideshows; i++) {
        // get every img tag in slideshow
        var slides = slideshow[i].getElementsByTagName("img");
        var numslides = slides.length;
        console.log("slideshow " + i + " has " + numslides + " slides");

        indexNext = 2%numslides; console.log("Next = " + indexNext);
        console.log(indexPrev + " " + indexCurrent + " " + indexNext);

        // get img src of slides[0]
        var src = slides[0].src;

        // get imgname and extension

        var imgname = src.substring(0, src.length-5);
        console.log("Name of image: " + imgname); 

        var ext = src.substring(src.length-4, src.length);
        console.log("File ext: " + ext); 

        // set innerHTML of slideshow[i]
        slideshow[0].innerHTML = "";
        slideshow[0].innerHTML+= "<img id='slideshow-" + indexPrev + "' onclick='slideHandler(this.id)' src='" + imgname + indexPrev + ext + "'>";    
        slideshow[0].innerHTML+= "<img id='slideshow-" + indexCurrent + "' onclick='slideHandler(this.id)' src='" + imgname + indexCurrent + ext + "'>";    
        slideshow[0].innerHTML+= "<img id='slideshow-" + indexNext + "' onclick='slideHandler(this.id)' src='" + imgname + indexNext + ext + "'>";    
              
        
        var node = document.querySelector(".slideshow"),
             ele = document.createElement("div");

        ele.className = "slideshow-indicator";
        
        for (var j = 0; j < numslides; j++) {
          ele.innerHTML+= "<div class='dot'></div>";
        }

        node.parentNode.insertBefore(ele, node.nextSibling);

        // var prev = document.getElementById("slideshow-previous");
        // var current = document.getElementById("slideshow-current");
        // var next = document.getElementById("slideshow-next");

        setdots();
      }

      var container = document.querySelector(".slideshow");

      container.addEventListener("touchstart", startTouch, false);
      container.addEventListener("touchmove", moveTouch, false);

      // Swipe Up / Down / Left / Right
      var initialX = null;

      function startTouch(e) {
        initialX = e.touches[0].clientX;
      };

      function moveTouch(e) {
        if (initialX === null) {
          return;
        }

        var currentX = e.touches[0].clientX;

        var diffX = initialX - currentX;

          if (diffX > 40) {
            // swiped left
            slideHandler(indexPrev);
            console.log("swiped left");
          } else if (diffX < -40) {
            // swiped right
            slideHandler(indexNext);
            console.log("swiped right");
          }

        initialX = null;

        // e.preventDefault();
      };





  </script>
</footer>
